<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <ProjectGuid>{440d06b8-e3de-4c0d-ad25-cd4f43d836e1}</ProjectGuid>
    <TargetFramework>net6.0</TargetFramework>
    <Platforms>AnyCPU;x64;arm64</Platforms>
  </PropertyGroup>

  <PropertyGroup>
    <!--
      PlatformIndependentPackage = true means that this package does
      not require the automatic generation of a runtime.json file using
      the Bait & Switch technique to reference RID specific packages
    -->
    <PlatformIndependentPackage>true</PlatformIndependentPackage>
  </PropertyGroup>

  <PropertyGroup>
    <PackageName>$(MSBuildProjectName.Replace('.ArchNeutral',''))$(TransportPackageNameSuffix)</PackageName>
    <AssemblyName>$(PackageName)</AssemblyName>
    <PackageDescription>WindowsDesktop SDK</PackageDescription>
  </PropertyGroup>

  <ItemGroup>
    <PackagingContent Include="Sdk\*" SubFolder="root\Sdk" />
    <PackagingContent Include="targets\*" SubFolder="root\targets" />
    <PackagingContent Include="useSharedDesignerContext.txt" SubFolder="root" />
  </ItemGroup>

  <!-- Windows Forms specific -->
  <PropertyGroup>
    <_WinFormsNuGetPath>$(PkgMicrosoft_Private_Winforms)</_WinFormsNuGetPath>
    <_WinFormsContentPath>$(_WinFormsNuGetPath)\sdk\dotnet-wpf\*</_WinFormsContentPath>
  </PropertyGroup>

  <ItemGroup>
    <PackagingContent Include="$(_WinFormsContentPath)" SubFolder="root\targets" />
  </ItemGroup>

  <!-- 
    This target *only* validates the content of Microsoft.Private.Winforms NuGet package
    to ensure we correctly import and reference props and targets.
   -->
  <Target Name="_EnsureWindowsFormsPackagingContent" BeforeTargets="IdentifyPackageAssets">
    <Error Text="Unable to resolve path to Microsoft.Private.Winforms NuGet package. Is %24(PkgMicrosoft_Private_Winforms) defined?"
           Condition="'$(_WinFormsNuGetPath)' == ''"/>

    <ItemGroup>
      <_WinFormsContent Include="$(_WinFormsContentPath)" />
    </ItemGroup>

    <Error Text="Microsoft.Private.Winforms NuGet package contains no content. Is this expected?"
           Condition="@(_WinFormsContent->Count()) == 0"/>
  </Target>
</Project>
